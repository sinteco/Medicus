{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","containers/users/lists.js","containers/users/views/searchPatients.js"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","DefaultItems","props","className","message","ListView","userItems","users","length","entries","index","user","userItem","session","username","listView","push","defaultMessage","InfiniteUserList","useSelector","s","getUsers","useCallback","a","view","search","page","limit","searchParams","URLSearchParams","append","fetch","toString","headers","authToken","response","json","ok","Error","useState","state","setState","Math","ceil","newUsers","prevState","updatedUsers","console","error","useEffect","load","callback","SearchPatientsView","searchQuery","setSearchQuery","query","title","handleSearch","placeholder"],"mappings":"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","file":"static/js/16.ceaa4f05.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { FluidContainer, Row, Col } from '../../components/layout';\r\nimport { List, ListItem } from '../../components/lists';\r\nimport { AutoLoader } from '../../components/loaders';\r\n\r\nimport User from './user';\r\n\r\n\r\nfunction DefaultItems(props) {\r\n    return (\r\n        <ListItem className=\"border-0\">\r\n            <FluidContainer>\r\n                <Row className=\"justify-content-center\">\r\n                    <Col className=\"col-auto align-items-center\">\r\n                        <h6 className=\"my-0 text-muted\">\r\n                            {props.message}\r\n                        </h6>\r\n                    </Col>\r\n                </Row>\r\n            </FluidContainer>\r\n        </ListItem>\r\n    );\r\n}\r\n\r\n\r\nexport function ListView(props) {\r\n    const userItems = [];\r\n    if (props.users && props.users.length > 0) {\r\n        for (const [index, user] of props.users.entries()) {\r\n\r\n            const userItem = (\r\n                <ListItem key={index} className=\"px-3\">\r\n                    <User\r\n                        session={props.session}\r\n                        username={user.username}\r\n                        listView={true}\r\n                    />\r\n                </ListItem>\r\n            );\r\n            userItems.push(userItem);\r\n        }\r\n    } else {\r\n        userItems.push(\r\n            <DefaultItems message={props.defaultMessage} />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <List className=\"md-list\">\r\n            {userItems}\r\n        </List>\r\n    );\r\n}\r\n\r\n\r\nexport default function InfiniteUserList(props) {\r\n    const session = useSelector(s => s.session);\r\n\r\n    const getUsers = useCallback(async ({view='', search='', page=0, limit=10}) => {\r\n        try {\r\n            const searchParams = new URLSearchParams();\r\n            searchParams.append('view', (view) ? view : '');\r\n            searchParams.append('search', (search) ? search : '');\r\n            searchParams.append('page', page);\r\n            searchParams.append('limit', limit);\r\n\r\n            const response = await fetch(`/api/users?${searchParams.toString()}`, {\r\n                headers: {\r\n                'Authorization': `Bearer ${session.authToken}`\r\n                }\r\n            });\r\n\r\n            const users = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(users.message);\r\n            }\r\n\r\n            return users;\r\n        } catch (err) {\r\n            throw(err);\r\n        }\r\n    }, [session.authToken]);\r\n\r\n    const [state, setState] = useState({\r\n        users: [],\r\n        limit: 10\r\n    });\r\n\r\n    // If props change, initialize users.\r\n    useEffect(() => {\r\n        async function load() {\r\n            try {\r\n                const newUsers = await getUsers({\r\n                    view: props.view,\r\n                    search: props.search,\r\n                    page: 0,\r\n                    limit: state.limit\r\n                });\r\n\r\n                setState(prevState => {\r\n                    return {\r\n                        ...prevState,\r\n                        users: newUsers\r\n                    }\r\n                });\r\n            } catch (err) {\r\n                console.error(`Failed to load users. ${err}`);\r\n            }\r\n        }\r\n\r\n        load();\r\n    }, [props.view, props.search, getUsers, state.limit]);\r\n\r\n    async function appendUsers() {\r\n        try {\r\n            const newUsers = await getUsers({\r\n                view: props.view,\r\n                search: props.search,\r\n                page: Math.ceil(state.users.length / state.limit),\r\n                limit: state.limit\r\n            });\r\n            \r\n            setState(prevState => {\r\n                const updatedUsers = [...prevState.users, ...newUsers];\r\n\r\n                return {\r\n                    ...prevState,\r\n                    users: updatedUsers\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.error(`Failed to append more users. ${err}`);\r\n        }\r\n    }\r\n\r\n    // Now render view\r\n    return (\r\n        <FluidContainer>\r\n            <Row>\r\n                <Col className=\"px-0\">\r\n                    <ListView\r\n                        session={session}\r\n                        users={state.users}\r\n                        defaultMessage={props.defaultMessage}\r\n                    />\r\n                    {(state.users.length > 0) &&\r\n                        <AutoLoader callback={appendUsers} />\r\n                    }\r\n                </Col>\r\n            </Row>\r\n        </FluidContainer>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport { Col, Row } from '../../../components/layout';\r\n\r\nimport TitleBar, { TitleBarSearch } from '../../home/titleBar';\r\nimport InfiniteUserList from '../lists';\r\n\r\n\r\nexport default function SearchPatientsView(props) {\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n    async function handleSearch(query) {\r\n        setSearchQuery(query);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <TitleBar title=\"Search Patients\">\r\n                <TitleBarSearch\r\n                    handleSearch={handleSearch}\r\n                    placeholder=\"Search patients...\"\r\n                />\r\n            </TitleBar>\r\n            <Row className=\"flex-grow-1\">\r\n                <Col>\r\n                    <InfiniteUserList \r\n                        view=\"patient\"\r\n                        search={searchQuery}\r\n                        defaultMessage=\"Search for Patients using the search bar.\"\r\n                    />\r\n                </Col>\r\n            </Row>\r\n        </>\r\n    );\r\n}"],"sourceRoot":""}