{"version":3,"sources":["containers/appointments/appointment/views/detailView/notes/addSection.js","containers/appointments/appointment/views/detailView/notes/listSection.js","containers/appointments/appointment/views/detailView/notes/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"names":["AddSection","props","useState","errorMessage","setErrorMessage","title","content","fields","setFields","handleChange","e","a","target","name","value","preventDefault","newNote","fromUsername","Username","user","session","date","Date","fetch","appointment","id","method","credentials","headers","authToken","body","JSON","stringify","response","json","data","ok","Error","message","appendNote","console","error","className","handleSubmit","role","for","type","onChange","placeholder","rows","DefaultNoteItem","NoteItem","handleDelete","note","fromCurrentUser","handleClick","ListSection","notes","length","map","index","deleteNote","NoteSection","limit","state","setState","url","searchParams","URLSearchParams","append","Math","ceil","toString","newNotes","prevState","updatedNotes","filter","isCurrentUserPhysician","useCompareUsers","physician","expandIcon","collapseIcon","callback","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError"],"mappings":"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","file":"static/js/19.37b96544.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { Form, FormGroup, FormLabel, FormRow, \r\n    FormSubmit } from '../../../../../../components/form';\r\nimport { Username } from '../../../../../../components/users';\r\n\r\n\r\nexport default function AddSection(props) {\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n    const [fields, setFields] = useState({\r\n        title: \"\",\r\n        content: \"\"\r\n    });\r\n\r\n    async function handleChange(e) {\r\n        setFields({\r\n            ...fields,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    }\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n        try {\r\n            const newNote = {\r\n                fromUsername: Username({ user: props.session }),\r\n                title: fields.title,\r\n                content: fields.content,\r\n                date: new Date()\r\n            };\r\n\r\n            const response = await fetch(`/api/appointments/${props.appointment.id}/notes`, {\r\n                method: 'POST',\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'Authorization': `Bearer ${props.session.authToken}`\r\n                },\r\n                body: JSON.stringify(newNote)\r\n            });\r\n\r\n            let data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.message);\r\n            }\r\n\r\n            newNote.id = data.id;\r\n            if (props.appendNote) {\r\n                props.appendNote(newNote);\r\n            }\r\n\r\n            setFields({\r\n                ...fields,\r\n                title: \"\",\r\n                content: \"\"\r\n            });\r\n        } catch (err) {\r\n            console.error(`Failed to add new note. ${err}`);\r\n            setErrorMessage(err.message);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form className=\"container-fluid\" handleSubmit={handleSubmit}>\r\n            {(errorMessage) &&\r\n                <FormRow className=\"justify-content-center\">\r\n                    <div className=\"alert alert-danger\" role=\"alert\">{errorMessage}</div>\r\n                </FormRow>\r\n            }\r\n            <FormRow className=\"my-2\">\r\n                <FormLabel for=\"noteWidget1\" className=\"col-sm-4\">Title</FormLabel>\r\n                <FormGroup className=\"col-sm-8\">\r\n                    <input id=\"noteWidget1\" type=\"text\" name=\"title\" \r\n                        className=\"form-control\" value={fields.title} onChange={handleChange}\r\n                            placeholder=\"Add new title\">\r\n                    </input>\r\n                </FormGroup>\r\n            </FormRow>\r\n            <FormRow className=\"my-2\">\r\n                <FormLabel for=\"noteWidget2\" className=\"col-sm-4\">Content</FormLabel>\r\n                <FormGroup className=\"col-sm-8\">\r\n                    <textarea id=\"noteWidget2\" type=\"text\" name=\"content\" \r\n                        className=\"form-control\" value={fields.content} onChange={handleChange}\r\n                            placeholder=\"Add new content\" rows=\"3\">\r\n                    </textarea>\r\n                </FormGroup>\r\n            </FormRow>\r\n            <FormRow className=\"my-2 justify-content-center\">\r\n                <FormSubmit className=\"col-auto col-md-4\">Add</FormSubmit>\r\n            </FormRow>\r\n        </Form>\r\n    );\r\n}","import React from 'react';\r\nimport { MonthDate } from '../../../../../../components/dates';\r\nimport { Col, FluidContainer, Row } from '../../../../../../components/layout';\r\nimport { Username } from '../../../../../../components/users';\r\nimport { WidgetList, WidgetListItem, WidgetDropdown, \r\n    WidgetDropdownItem } from '../../../../../../components/widgets';\r\n\r\n\r\nfunction DefaultNoteItem(props) {\r\n    return (\r\n        <WidgetListItem>\r\n            <FluidContainer>\r\n                <Row>\r\n                    <Col className=\"md-font-sm text-center text-muted\">No note available</Col>\r\n                </Row>\r\n            </FluidContainer>\r\n        </WidgetListItem>\r\n    );\r\n}\r\n\r\n\r\nfunction NoteItem(props) {\r\n    async function handleDelete(e) {\r\n        e.preventDefault();\r\n        if (props.handleDelete) {\r\n            props.handleDelete(props.note.id);\r\n        }\r\n    }\r\n\r\n    const fromUsername = props.note.fromUsername;\r\n    const currentUsername = Username({ user: props.session });\r\n    const fromCurrentUser = (currentUsername === fromUsername) ? true: false;\r\n\r\n    const date = new Date(props.note.date);\r\n    return (\r\n        <WidgetListItem>\r\n            <FluidContainer>\r\n                <Row>\r\n                    <Col className=\"align-self-center\">\r\n                        <Row>\r\n                            <Col className=\"text-truncate\">{props.note.title}</Col>\r\n                            <Col className=\"col-auto\">\r\n                                <MonthDate date={date} />\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col className=\"text-truncate\">{props.note.content}</Col>\r\n                        </Row>\r\n                    </Col>\r\n                    <Col className=\"col-auto px-2\">\r\n                        {fromCurrentUser &&\r\n                            <WidgetDropdown>\r\n                                <WidgetDropdownItem handleClick={handleDelete}>Delete</WidgetDropdownItem>\r\n                            </WidgetDropdown>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n            </FluidContainer>\r\n        </WidgetListItem>\r\n    );\r\n}\r\n\r\n\r\nexport default function ListSection(props) {\r\n    return (\r\n        <WidgetList>\r\n            {(props.notes.length !== 0) ?\r\n                <>\r\n                    {props.notes.map((note, index) => (\r\n                        <NoteItem \r\n                            key={index}\r\n                            session={props.session}\r\n                            note={note}\r\n                            handleDelete={props.deleteNote}\r\n                        />\r\n                    ))}\r\n                </> :\r\n                <DefaultNoteItem />\r\n            }\r\n        </WidgetList>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport { useCompareUsers } from '../../../../../../components/hooks';\r\nimport { AutoLoader} from '../../../../../../components/loaders';\r\nimport { TitleBar, TitleToggler, Widget, \r\n    WidgetCollapsible } from '../../../../../../components/widgets';\r\n\r\nimport AddSection from './addSection';\r\nimport ListSection from './listSection';\r\n\r\n\r\nexport default function NoteSection(props) {\r\n    const [state, setState] = useState({\r\n        notes: [],\r\n        limit: 10\r\n    });\r\n\r\n    async function appendNotes() {\r\n        try {\r\n            const url = `/api/appointments/${props.appointment.id}/notes`;\r\n\r\n            const searchParams = new URLSearchParams();\r\n            searchParams.append('page', Math.ceil(state.notes.length / state.limit));\r\n            searchParams.append('limit', state.limit);\r\n            \r\n            const response = await fetch(`${url}?${searchParams.toString()}`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${props.session.authToken}`\r\n                }\r\n            });\r\n\r\n            let newNotes = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(newNotes.message);\r\n            }\r\n\r\n            setState(prevState => {\r\n                const updatedNotes = [...prevState.notes, ...newNotes];\r\n\r\n                return {\r\n                    ...prevState,\r\n                    notes: updatedNotes\r\n                }\r\n            })\r\n        } catch (err) {\r\n            console.error(`Failed to append more notes. ${err}`);\r\n        }\r\n    }\r\n\r\n    async function appendNote(newNote) {\r\n        setState(prevState => {\r\n            const newNotes = [newNote, ...prevState.notes];\r\n\r\n            return {\r\n                ...prevState,\r\n                notes: newNotes\r\n            }\r\n        });\r\n    }\r\n\r\n    async function deleteNote(id) {\r\n        try {\r\n            const response = await fetch(`/api/appointments/${props.appointment.id}/notes/${id}`, {\r\n                method: 'DELETE',\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'Authorization': `Bearer ${props.session.authToken}`\r\n                }\r\n            });\r\n\r\n            let data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.message);\r\n            }\r\n\r\n            setState(prevState => {\r\n                const newNotes = state.notes.filter(note => {\r\n                    return note.id !== id;\r\n                });\r\n\r\n                return {\r\n                    ...prevState,\r\n                    notes: newNotes\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.error(`Failed to delete note- ${id}. ${err}`);\r\n        }\r\n    }\r\n\r\n\r\n    // Now render view\r\n    const isCurrentUserPhysician = useCompareUsers(props.session, props.appointment.physician);\r\n\r\n    return (\r\n        <>\r\n            <Widget>\r\n                <TitleBar title=\"Notes\">\r\n                    {isCurrentUserPhysician &&\r\n                        <TitleToggler \r\n                            target=\"apptNoteAdd01\"\r\n                            expandIcon=\"add\"\r\n                            collapseIcon=\"clear\"\r\n                        />\r\n                    }\r\n                </TitleBar>\r\n                <WidgetCollapsible id=\"apptNoteAdd01\">\r\n                    <AddSection \r\n                        session={props.session}\r\n                        appointment={props.appointment}\r\n                        appendNote={appendNote}\r\n                    />\r\n                </WidgetCollapsible>\r\n                <ListSection \r\n                    session={props.session}\r\n                    notes={state.notes}\r\n                    deleteNote={deleteNote}\r\n                />\r\n            </Widget>\r\n            <AutoLoader callback={appendNotes} />\r\n        </>\r\n    );\r\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"sourceRoot":""}